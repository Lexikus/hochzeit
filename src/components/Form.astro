<div class="flex justify-center">
    <div class="px-4 w-full">
        <form
            id="form"
            method="post"
            enctype="text/plain"
            name="Anmeldung zur Hochzeit"
        >
            <div class="form-control">
                <label for="name" class="label">
                    <span class="label-text">Name</span>
                </label>
                <input
                    id="name"
                    type="text"
                    placeholder="Name"
                    class="input input-bordered focus:input-primary"
                    required
                />
            </div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text">Ich nehme teil</span>
                    <input
                        id="participation"
                        type="checkbox"
                        class="toggle toggle-primary"
                        checked
                    />
                </label>
            </div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text"
                        >Ich wünsche ein Fleischgericht</span
                    >
                    <input
                        id="meatdish"
                        type="checkbox"
                        class="toggle toggle-primary"
                        checked
                    />
                </label>
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text">Anzahl Personen</span>
                    <div class="ml-6 flex-grow">
                        <input
                            id="people"
                            type="range"
                            min="1"
                            max="5"
                            value="2"
                            class="range range-primary"
                            step="1"
                        />
                        <div class="w-full flex justify-between text-xs px-2">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                        </div>
                    </div>
                </label>
            </div>
            <div class="form-control mt-6">
                <button class="btn btn-primary">Anmelden</button>
            </div>
        </form>
    </div>
</div>

<script lang="js">
    const form = document.querySelector("form");
    form.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.querySelector("#name")?.value ?? "Unbekannt";
        const participation =
            document.querySelector("#participation")?.checked ?? false;
        const meatdish = document.querySelector("#meatdish")?.checked ?? false;
        const people = document.querySelector("#people")?.value ?? "1";
        const mail = "wedding@bifulco.dev";
        const personMessage =
            people === "1"
                ? `Ich komme alleine.`
                : `Ich komme mit ${people} Personen.`;
        const meatdishMessage = meatdish
            ? "Ich wünsche ein Fleischgericht."
            : "Ich wünsche ein vegetarisches Gericht.";
        const message = participation
            ? `Ich, ${name}, nehme gerne an deiner Hochzeit teil. ${personMessage} ${meatdishMessage}`
            : `Ich, ${name}, kann leider nicht an deiner teilnehmen.`;
        form.action = `mailto:${mail}@body=${message}`;
        form.submit();
    });
</script>
